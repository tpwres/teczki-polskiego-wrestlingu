{% extends "base.html" %}
{% import "macros/articles.html" as articles %}

{% block content %}
{% set categories = get_taxonomy(kind="category") %}

{% set term = section.title %}
{% set category = get_taxonomy_term(kind="category", term=term) %}
{% set sort_by = config.extra.articles.sort_by %}
{% set sort_reversed = config.extra.articles.reverse %}
{% set pages = category.pages | sort(attribute=sort_by) %}
{% if sort_reversed %}{% set pages = pages | reverse %} {% endif %}

{% include "articles/category_list.html" %}

<h2>Articles in category {{ term }}</h2>
<section class="article-list">
    {% for page in pages %}
    <article>
        {{ articles::cover(article=page) | safe }}
        <div class="blurb">
            <a class="title" href="{{ page.permalink }}">{{ page.title }}</a>
            {{ page.summary | safe }}
            <a class="continue" href="{{ page.permalink }}">Continue reading</a>
        </div>
    </article>
    {% endfor %}
</section>
{% endblock %}
