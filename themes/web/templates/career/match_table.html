<ul class="career">
    <li class="header">
        <span class="d">Date</span>
        <span class="o">Org</span>
        <span class="r">Details</span>
    </li>
    {% set lastyr = "-" %}
    {% for match in matches_by_date | reverse %}
        {% set yr = match.d | date(format="%Y") %}
        {% if lastyr != yr %}
            {% set_global lastyr = yr %}
            {% set yrtarget = "career-" ~ yr %}
        {% else %}
            {% set yrtarget = false %}
        {% endif %}
        <li class="entry {{ match.tt | default(value="") }}"
        {% if enable_matchlist_links and yrtarget %}id="{{ yrtarget }}"{% endif %}>
            <time class="d" style="white-space: nowrap" datetime="{{ match.d }}">{{ match.d }}</time>
            <span class="o">
                {% for org in match.o %}
                {{ macros::promolink_color(code=org, styles=org_styles) }}
                {% endfor %}
            </span>
            {% set row = match.m %}
            {# It may happen that the same match.i happens more than once #}
            {# This means more than one appearance in that match (think rumbles, entering under different names) #}
            {# These matches were filtered out by unique above, so we have only one. #}
            {% set positions = my_match_pos[match.i] | map(attribute='1') %}
            <span class="r">
                {% include "career/result_row.html" %}
                {% set event_path = "@/" ~ match.p %}
                <small>at <a href="{{ get_url(path=event_path) }}">{{ match.n }}</a></small>
                {% if match.tt %}
                ({{ match.tt }})
                {% endif %}
            </span>
        </li>
    {% endfor %}
</ul>
